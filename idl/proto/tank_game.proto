syntax = "proto3";
package tank_game;

import "proto/tank_common.proto";
import "proto/common.proto";

message Ping {
    float ts = 1;
}

message Pong {
    float ts          = 1;
    float currentTime = 2;
}

//登录请求
message LoginReq {
    string name = 1;
    string id   = 2;
}

//登录回复
message LoginRsp {
    common.ErrorCode code = 1;
    string           msg  = 2;
}

message PlayerApperanceNtf {
    string                id                = 1;
    string                name              = 2;
    tank_common.Transform transform         = 3;
    int32                 hp                = 4;
    float                 rebornProtectTime = 5;
}

message PlayerStateNtf {
    string                id        = 1;
    float                 syncTime  = 2;
    tank_common.Transform transform = 3;
}

message PlayerDisappearNtf {
    string id = 1;
}

message PlayerStateSyncReq {
    float                 syncTime  = 1;
    tank_common.Transform transform = 2;
}

message PlayerShootReq {
    tank_common.Transform transform = 1;
}

message PlayerShootNtf {
    string                id        = 1;
    tank_common.Transform transform = 2;
    float                 speed     = 3;
}

message BulletDestoryNtf {
    uint32              id  = 1;
    tank_common.Vector3 pos = 2;
}

message TankHpSyncNtf {
    string id = 1;
    int32  hp = 2;
}

message PlayerDieNtf {
    string killedId          = 1;  //被击杀的玩家ID
    string killerId          = 2;  //击杀者ID
    float  rebornProtectTime = 3;  //重生保护时间
}

message GameOverNtf {
}
